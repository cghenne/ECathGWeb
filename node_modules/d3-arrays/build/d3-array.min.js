!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define("d3-array",["exports"],r):r(n.d3_arrays={})}(this,function(n){"use strict";function r(n,r){return r>n?-1:n>r?1:n>=r?0:NaN}function t(n){return 1===n.length&&(n=e(n)),{left:function(r,t,e,u){for(arguments.length<3&&(e=0),arguments.length<4&&(u=r.length);u>e;){var i=e+u>>>1;n(r[i],t)<0?e=i+1:u=i}return e},right:function(r,t,e,u){for(arguments.length<3&&(e=0),arguments.length<4&&(u=r.length);u>e;){var i=e+u>>>1;n(r[i],t)>0?u=i:e=i+1}return e}}}function e(n){return function(t,e){return r(n(t),e)}}function u(n,r){return n>r?-1:r>n?1:r>=n?0:NaN}function i(n){return null===n?NaN:+n}function o(n,r){var t,e,u=n.length,o=0,f=0,a=-1,s=0;if(1===arguments.length)for(;++a<u;)isNaN(t=i(n[a]))||(e=t-o,o+=e/++s,f+=e*(t-o));else for(;++a<u;)isNaN(t=i(r(n[a],a,n)))||(e=t-o,o+=e/++s,f+=e*(t-o));return s>1?f/(s-1):void 0}function f(){var n=o.apply(this,arguments);return n?Math.sqrt(n):n}function a(n){var r=[];for(var t in n)r.push({key:t,value:n[t]});return r}function s(n,r){var t,e,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o;)if(null!=(e=n[i])&&e>=e){t=u=e;break}for(;++i<o;)null!=(e=n[i])&&(t>e&&(t=e),e>u&&(u=e))}else{for(;++i<o;)if(null!=(e=r(n[i],i,n))&&e>=e){t=u=e;break}for(;++i<o;)null!=(e=r(n[i],i,n))&&(t>e&&(t=e),e>u&&(u=e))}return[t,u]}function l(n){return function(){return n}}function h(n){return n}function c(n,r,t){var e=(r-n)/(t+1),u=new Array(t),i=-1;for(n+=e;++i<t;)u[i]=n+i*e;return u}function g(n){return function(r,t){return c(r,t,n)}}function v(n,r,t){return c(n,r,Math.ceil(Math.log(t.length)/Math.LN2))}function p(n){return+n}function m(){function n(n){var u,i,o=n.length,f=new Array(o);for(u=0;o>u;++u)f[u]=+r(n[u],u,n);var a=t(f),s=+a[0],l=+a[1],h=e(s,l,f),c=h.length;for(u=0;c>u;++u)i=h[u]=+h[u];for(;h[0]<=s;)h.shift(),--c;for(;h[c-1]>=l;)h.pop(),--c;var g,v=new Array(c+1);for(u=0;c>=u;++u)g=v[u]=[],g.x0=u>0?h[u-1]:s,g.x1=c>u?h[u]:l;for(u=0;o>u;++u)i=f[u],i>=s&&l>=i&&v[P(h,i,0,c)].push(n[u]);return v}var r=h,t=s,e=v;return n.value=function(t){return arguments.length?(r="function"==typeof t?t:l(+t),n):r},n.domain=function(r){return arguments.length?(t="function"==typeof r?r:l([+r[0],+r[1]]),n):t},n.thresholds=function(r){return arguments.length?(e="function"==typeof r?r:Array.isArray(r)?l(Array.prototype.map.call(r,p)):g(+r),n):e},n}function y(n,r,t){if(arguments.length<3&&(t=i),e=n.length){if((r=+r)<=0||2>e)return+t(n[0],0,n);if(r>=1)return+t(n[e-1],e-1,n);var e,u=(e-1)*r,o=Math.floor(u),f=+t(n[o],o,n),a=+t(n[o+1],o+1,n);return f+(a-f)*(u-o)}}function d(n,t,e){e.sort(r);var u=2*(y(e,.75)-y(e,.25))*Math.pow(e.length,-1/3),i=Math.ceil((t-n)/u);return c(n,t,i-1)}function N(n,r,t){var e=3.5*f(t)*Math.pow(t.length,-1/3),u=Math.ceil((r-n)/e);return c(n,r,u-1)}function k(n){var r=[];for(var t in n)r.push(t);return r}function A(){}function w(n,r){var t=new A;if(n instanceof A)n.each(function(n,r){t.set(r,n)});else if(Array.isArray(n)){var e,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)t.set(u,n[u]);else for(;++u<i;)t.set(r(e=n[u],u,n),e)}else if(n)for(var o in n)t.set(o,n[o]);return t}function b(n,r){var t,e,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(e=n[u])&&e>=e){t=e;break}for(;++u<i;)null!=(e=n[u])&&e>t&&(t=e)}else{for(;++u<i;)if(null!=(e=r(n[u],u,n))&&e>=e){t=e;break}for(;++u<i;)null!=(e=r(n[u],u,n))&&e>t&&(t=e)}return t}function M(n,r){var t,e=0,u=n.length,o=-1,f=u;if(1===arguments.length)for(;++o<u;)isNaN(t=i(n[o]))?--f:e+=t;else for(;++o<u;)isNaN(t=i(r(n[o],o,n)))?--f:e+=t;return f?e/f:void 0}function x(n,t){var e,u=[],o=n.length,f=-1;if(1===arguments.length)for(;++f<o;)isNaN(e=i(n[f]))||u.push(e);else for(;++f<o;)isNaN(e=i(t(n[f],f,n)))||u.push(e);return y(u.sort(r),.5)}function z(n){for(var r,t,e,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(t=new Array(o);--u>=0;)for(e=n[u],r=e.length;--r>=0;)t[--o]=e[r];return t}function j(n,r){var t,e,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(e=n[u])&&e>=e){t=e;break}for(;++u<i;)null!=(e=n[u])&&t>e&&(t=e)}else{for(;++u<i;)if(null!=(e=r(n[u],u,n))&&e>=e){t=e;break}for(;++u<i;)null!=(e=r(n[u],u,n))&&t>e&&(t=e)}return t}function q(){function n(r,u,o,f){if(u>=i.length)return e?e(r):t?r.sort(t):r;for(var a,s,l,h=-1,c=r.length,g=i[u++],v=w(),p=o();++h<c;)(l=v.get(a=g(s=r[h])+""))?l.push(s):v.set(a,[s]);return v.each(function(r,t){f(p,t,n(r,u,o,f))}),p}function r(n,t){if(t>=i.length)return n;var e=[],u=o[t++];return n.each(function(n,u){e.push({key:u,values:r(n,t)})}),u?e.sort(function(n,r){return u(n.key,r.key)}):e}var t,e,u,i=[],o=[];return u={object:function(r){return n(r,0,L,S)},map:function(r){return n(r,0,D,F)},entries:function(t){return r(n(t,0,D,F),0)},key:function(n){return i.push(n),u},sortKeys:function(n){return o[i.length-1]=n,u},sortValues:function(n){return t=n,u},rollup:function(n){return e=n,u}}}function L(){return{}}function S(n,r,t){n[r]=t}function D(){return w()}function F(n,r,t){n.set(r,t)}function K(n){for(var r,t=0,e=n.length-1,u=n[0],i=new Array(0>e?0:e);e>t;)i[t]=[r=u,u=n[++t]];return i}function R(n,r){for(var t=r.length,e=new Array(t);t--;)e[t]=n[r[t]];return e}function V(n,r,t){(u=arguments.length)<3&&(t=1,2>u&&(r=n,n=0));for(var e=-1,u=0|Math.max(0,Math.ceil((r-n)/t)),i=new Array(u);++e<u;)i[e]=n+e*t;return i}function $(n,t){if(e=n.length){var e,u,i=0,o=0,f=n[o];for(t||(t=r);++i<e;)(t(u=n[i],f)<0||0!==t(f,f))&&(f=u,o=i);return 0===t(f,f)?o:void 0}}function _(){}function B(n){var r=new _;if(n instanceof _)n.each(function(n){r.add(n)});else if(n)for(var t=0,e=n.length;e>t;++t)r.add(n[t]);return r}function C(n,r,t){(i=arguments.length)<3&&(t=n.length,2>i&&(r=0));for(var e,u,i=t-r;i;)u=Math.random()*i--|0,e=n[i+r],n[i+r]=n[u+r],n[u+r]=e;return n}function E(n,r){var t,e=0,u=n.length,i=-1;if(1===arguments.length)for(;++i<u;)isNaN(t=+n[i])||(e+=t);else for(;++i<u;)isNaN(t=+r(n[i],i,n))||(e+=t);return e}function G(n){if(!(u=n.length))return[];for(var r=-1,t=j(n,H),e=new Array(t);++r<t;)for(var u,i=-1,o=e[r]=new Array(u);++i<u;)o[i]=n[i][r];return e}function H(n){return n.length}function I(n){var r=[];for(var t in n)r.push(n[t]);return r}function J(){return G(arguments)}var O=t(r),P=O.right,Q=O.left,T="$";A.prototype=w.prototype={has:function(n){return T+n in this},get:function(n){return this[T+n]},set:function(n,r){return this[T+n]=r,this},remove:function(n){var r=T+n;return r in this&&delete this[r]},clear:function(){for(var n in this)n[0]===T&&delete this[n]},keys:function(){var n=[];for(var r in this)r[0]===T&&n.push(r.slice(1));return n},values:function(){var n=[];for(var r in this)r[0]===T&&n.push(this[r]);return n},entries:function(){var n=[];for(var r in this)r[0]===T&&n.push({key:r.slice(1),value:this[r]});return n},size:function(){var n=0;for(var r in this)r[0]===T&&++n;return n},empty:function(){for(var n in this)if(n[0]===T)return!1;return!0},each:function(n){for(var r in this)r[0]===T&&n(this[r],r.slice(1),this)}};var U=w.prototype;_.prototype=B.prototype={has:U.has,add:function(n){return n+="",this[T+n]=n,this},remove:U.remove,clear:U.clear,values:U.keys,size:U.size,empty:U.empty,each:U.each};var W="0.5.0";n.version=W,n.bisect=P,n.bisectRight=P,n.bisectLeft=Q,n.ascending=r,n.bisector=t,n.descending=u,n.deviation=f,n.entries=a,n.extent=s,n.histogram=m,n.thresholdFreedmanDiaconis=d,n.thresholdScott=N,n.thresholdSturges=v,n.keys=k,n.map=w,n.max=b,n.mean=M,n.median=x,n.merge=z,n.min=j,n.nest=q,n.pairs=K,n.permute=R,n.quantile=y,n.range=V,n.scan=$,n.set=B,n.shuffle=C,n.sum=E,n.transpose=G,n.values=I,n.variance=o,n.zip=J});