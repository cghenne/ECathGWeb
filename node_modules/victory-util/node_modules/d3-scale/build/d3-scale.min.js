!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-color"),require("d3-interpolate"),require("d3-arrays"),require("d3-format"),require("d3-time-format"),require("d3-time")):"function"==typeof define&&define.amd?define("d3-scale",["exports","d3-color","d3-interpolate","d3-arrays","d3-format","d3-time-format","d3-time"],t):t(n.d3_scale={},n.d3_color,n.d3_interpolate,n.d3_arrays,n.d3_format,n.d3_time_format,n.d3_time)}(this,function(n,t,e,r,u,i,a){"use strict";function o(n,t,e){for(var r=new Array(n),u=-1;++u<n;)r[u]=t+e*u;return r}function c(n,t){function e(e){var r=e+"",a=u.get(r);if(!a){if("range"!==t.t)return;u.set(r,a=n.push(e))}return i[(a-1)%i.length]}var u,i,a;return e.domain=function(i){if(!arguments.length)return n.slice();n=[],u=r.map();for(var a,o,c=-1,f=i.length;++c<f;)u.has(o=(a=i[c])+"")||u.set(o,n.push(a));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n.slice(),a=0,t={t:"range",a:arguments},e):i.slice()},e.rangePoints=function(r,u){u=arguments.length<2?0:+u;var c=+r[0],f=+r[1],l=n.length<2?(c=(c+f)/2,0):(f-c)/(n.length-1+u);return i=o(n.length,c+l*u/2,l),a=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(r,u){u=arguments.length<2?0:+u;var c=+r[0],f=+r[1],l=n.length<2?(c=f=Math.round((c+f)/2),0):(f-c)/(n.length-1+u)|0;return i=o(n.length,c+Math.round(l*u/2+(f-c-(n.length-1+u)*l)/2),l),a=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(r,u,c){u=arguments.length<2?0:+u,c=arguments.length<3?u:+c;var f=+r[1]<+r[0],l=+r[f-0],g=+r[1-f],s=(g-l)/(n.length-u+2*c);return i=o(n.length,l+s*c,s),f&&i.reverse(),a=s*(1-u),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(r,u,c){u=arguments.length<2?0:+u,c=arguments.length<3?u:+c;var f=+r[1]<+r[0],l=+r[f-0],g=+r[1-f],s=Math.floor((g-l)/(n.length-u+2*c));return i=o(n.length,l+Math.round((g-l-(n.length-u)*s)/2),s),f&&i.reverse(),a=Math.round(s*(1-u)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){var n=t.a[0],e=n[0],r=n[n.length-1];return e>r&&(n=r,r=e,e=n),[e,r]},e.copy=function(){return c(n,t)},e.domain(n)}function f(){return c([],{t:"range",a:[[]]})}function l(){return f().range(["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"])}function g(){return f().range(["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"])}function s(){return f().range(["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"])}function h(){return f().range(["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"])}function d(n,t){if(n=n.slice(),!t)return n;var e,r=0,u=n.length-1,i=n[r],a=n[u];return i>a&&(e=r,r=u,u=e,e=i,i=a,a=e),n[r]=Math.floor(i/t)*t,n[u]=Math.ceil(a/t)*t,n}function m(n,t){null==t&&(t=10);var e=n[0],r=n[n.length-1];e>r&&(a=r,r=e,e=a);var u=r-e,i=Math.pow(10,Math.floor(Math.log(u/t)/Math.LN10)),a=u/t/i;return a>=H?i*=10:a>=W?i*=5:a>=G&&(i*=2),[Math.ceil(e/i)*i,Math.floor(r/i)*i+i/2,i]}function p(n,t){return r.range.apply(null,m(n,t))}function b(n,t,e){var r=m(n,t);if(null==e)e=",."+u.precisionFixed(r[2])+"f";else switch(e=u.formatSpecifier(e),e.type){case"s":var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==e.precision&&(e.precision=u.precisionPrefix(r[2],i)),u.formatPrefix(e,i);case"":case"e":case"g":case"p":case"r":null==e.precision&&(e.precision=u.precisionRound(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===e.type));break;case"f":case"%":null==e.precision&&(e.precision=u.precisionFixed(r[2])-2*("%"===e.type))}return u.format(e)}function v(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function M(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function y(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function x(n,t,e,u){var i=Math.min(n.length,t.length)-1,a=new Array(i),o=new Array(i),c=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++c<i;)a[c]=e(n[c],n[c+1]),o[c]=u(t[c],t[c+1]);return function(t){var e=r.bisect(n,t,1,i)-1;return o[e](a[e](t))}}function w(n,t,r,u){function i(){var i=Math.min(n.length,t.length)>2?x:y,f=u?v:M;return o=i(n,t,f,r),c=i(t,n,f,e.number),a}function a(n){return o(n)}var o,c;return a.invert=function(n){return c(n)},a.domain=function(t){return arguments.length?(n=t.map(Number),i()):n.slice()},a.range=function(n){return arguments.length?(t=n.slice(),i()):t.slice()},a.rangeRound=function(n){return a.range(n).interpolate(e.round)},a.clamp=function(n){return arguments.length?(u=!!n,i()):u},a.interpolate=function(n){return arguments.length?(r=n,i()):r},a.ticks=function(t){return p(n,t)},a.tickFormat=function(t,e){return b(n,t,e)},a.nice=function(t){return n=d(n,m(n,t)[2]),i()},a.copy=function(){return w(n,t,r,u)},i()}function N(n,t){return n.range=function(){var e=t.range.apply(t,arguments);return e===t?n:e},n.rangeRound=function(){var e=t.rangeRound.apply(t,arguments);return e===t?n:e},n.clamp=function(){var e=t.clamp.apply(t,arguments);return e===t?n:e},n.interpolate=function(){var e=t.interpolate.apply(t,arguments);return e===t?n:e},n}function k(){return w([0,1],[0,1],e.value,!1)}function q(){return k().interpolate(e.cubehelixLong).range([t.cubehelix(300,.5,0),t.cubehelix(-240,.5,1)])}function F(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(Number),t):n.slice()},t.ticks=function(t){return p(n,t)},t.tickFormat=function(t,e){return b(n,t,e)},t.copy=function(){return F(n)},t}function R(){return F([0,1])}function _(n,t,e){function r(n){return(e[0]<0?-Math.log(n>0?0:-n):Math.log(0>n?0:n))/Math.log(t)}function i(n){return e[0]<0?-Math.pow(t,-n):Math.pow(t,n)}function a(t){return n(r(t))}return a.invert=function(t){return i(n.invert(t))},a.base=function(n){return arguments.length?(t=+n,a.domain(e)):t},a.domain=function(t){return arguments.length?(e=t.map(Number),n.domain(e.map(r)),a):e.slice()},a.nice=function(){var t=d(n.domain(),1);return n.domain(t),e=t.map(i),a},a.ticks=function(){var n=e[0],u=e[e.length-1];n>u&&(c=n,n=u,u=c);var a,o,c=Math.floor(r(n)),f=Math.ceil(r(u)),l=t%1?2:t,g=[];if(isFinite(f-c))if(n>0){for(--f,a=1;l>a;++a){if((o=i(c)*a)<n)continue;g.push(o)}for(;++c<f;)for(a=1;l>a;++a)g.push(i(c)*a);for(a=1;l>a&&!((o=i(c)*a)>u);++a)g.push(o)}else{for(++c,a=l-1;a>=1;--a){if((o=i(c)*a)<n)continue;g.push(o)}for(;++c<f;)for(a=l-1;a>=1;--a)g.push(i(c)*a);for(a=l-1;a>=1&&!((o=i(c)*a)>u);--a)g.push(o)}return g},a.tickFormat=function(n,o){if(null==o?o=10===t?J:K:"function"!=typeof o&&(o=u.format(o)),null==n)return o;var c,f=Math.min(t,a.ticks().length/n),l=e[0]>0?(c=1e-12,Math.ceil):(c=-1e-12,Math.floor);return function(n){return i(l(r(n)+c))/n>=f?o(n):""}},a.copy=function(){return _(n.copy(),t,e)},N(a,n)}function B(){return _(k(),10,[1,10])}function D(n,t,e){function r(n){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}function u(n){return 0>n?-Math.pow(-n,1/t):Math.pow(n,1/t)}function i(t){return n(r(t))}return i.invert=function(t){return u(n.invert(t))},i.exponent=function(n){return arguments.length?(t=+n,i.domain(e)):t},i.domain=function(t){return arguments.length?(e=t.map(Number),n.domain(e.map(r)),i):e.slice()},i.ticks=function(n){return p(e,n)},i.tickFormat=function(n,t){return b(e,n,t)},i.nice=function(n){return i.domain(d(e,m(e,n)[2]))},i.copy=function(){return D(n.copy(),t,e)},N(i,n)}function P(){return D(k(),.5,[0,1])}function E(){return D(k(),1,[0,1])}function L(n,t){function e(){var e=0,a=t.length;for(i=[];++e<a;)i[e-1]=r.quantile(n,e/a);return u}function u(n){return isNaN(n=+n)?void 0:t[r.bisect(i,n)]}var i;return u.domain=function(t){if(!arguments.length)return n;n=[];for(var u,i=0,a=t.length;a>i;++i)u=t[i],null==u||isNaN(u=+u)||n.push(u);return n.sort(r.ascending),e()},u.range=function(n){return arguments.length?(t=n.slice(),e()):t.slice()},u.quantiles=function(){return i},u.invertExtent=function(e){return e=t.indexOf(e),0>e?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},u.copy=function(){return L(n,t)},e()}function A(){return L([],[])}function O(n,t,e){function r(t){return e[Math.max(0,Math.min(a,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),a=e.length-1,r}var i,a;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n.slice(),u()):e.slice()},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?NaN:t/i+n,[t,t+1/i]},r.copy=function(){return O(n,t,e)},u()}function S(){return O(0,1,[0,1])}function T(){return k().interpolate(e.cubehelixLong).domain([0,.5,1]).range([t.cubehelix(-100,.75,.35),t.cubehelix(80,1.5,.8),t.cubehelix(260,.75,.35)])}function C(n,t,e){function u(u){return u>=u?t[r.bisect(n,u,0,e)]:void 0}return u.domain=function(r){return arguments.length?(n=r.slice(),e=Math.min(n.length,t.length-1),u):n.slice()},u.range=function(r){return arguments.length?(t=r.slice(),e=Math.min(n.length,t.length-1),u):t.slice()},u.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},u.copy=function(){return C(n,t)},u}function I(){return C([.5],[0,1],1)}function U(n){return new Date(n)}function Y(n,t,e,r,u,i,a,o,c,f){function l(t){return n(t)}function g(n){return(o(n)<n?h:a(n)<n?d:i(n)<n?p:u(n)<n?b:e(n)<n?r(n)<n?v:M:t(n)<n?y:x)(n)}function s(n,e,r,u){if(null==n&&(n=10),"number"==typeof n){var i=Math.abs(r-e)/n,a=en(w,i);a===w.length?(u=m([e/tn,r/tn],n)[2],n=t):a?(a=w[i/w[a-1][2]<w[a][2]/i?a-1:a],u=a[1],n=a[0]):(u=m([e,r],n)[2],n=c)}return null==u?n:n.every(u)}var h=f(".%L"),d=f(":%S"),p=f("%I:%M"),b=f("%I %p"),v=f("%a %d"),M=f("%b %d"),y=f("%B"),x=f("%Y"),w=[[o,1,Q],[o,5,5*Q],[o,15,15*Q],[o,30,30*Q],[a,1,V],[a,5,5*V],[a,15,15*V],[a,30,30*V],[i,1,X],[i,3,3*X],[i,6,6*X],[i,12,12*X],[u,1,Z],[u,2,2*Z],[r,1,$],[e,1,nn],[e,3,3*nn],[t,1,tn]];return l.invert=function(t){return U(n.invert(t))},l.domain=function(t){return arguments.length?(n.domain(t),l):n.domain().map(U)},l.ticks=function(t,e){var r,u=n.domain(),i=u[0],a=u[u.length-1];return i>a&&(r=i,i=a,a=r),(t=s(t,i,a,e))?t.range(i,a+1):[]},l.tickFormat=function(n){return null==n?g:f(n)},l.nice=function(t,e){var r,u=n.domain(),i=0,a=u.length-1,o=u[i],c=u[a];return o>c&&(r=i,i=a,a=r,r=o,o=c,c=r),(t=s(t,o,c,e))&&(u[i]=+t.floor(o),u[a]=+t.ceil(c),n.domain(u)),l},l.copy=function(){return Y(n.copy(),t,e,r,u,i,a,o,c,f)},N(l,n)}function j(){return Y(k(),a.year,a.month,a.week,a.day,a.hour,a.minute,a.second,a.millisecond,i.format).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function z(){return Y(k(),a.utcYear,a.utcMonth,a.utcWeek,a.utcDay,a.utcHour,a.utcMinute,a.utcSecond,a.utcMillisecond,i.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}var H=Math.sqrt(50),W=Math.sqrt(10),G=Math.sqrt(2),J=u.format(".0e"),K=u.format(","),Q=1e3,V=60*Q,X=60*V,Z=24*X,$=7*Z,nn=30*Z,tn=365*Z,en=r.bisector(function(n){return n[2]}).right,rn="0.2.0";n.version=rn,n.category10=l,n.category20b=g,n.category20c=s,n.category20=h,n.cubehelix=q,n.identity=R,n.linear=k,n.log=B,n.ordinal=f,n.pow=E,n.sqrt=P,n.quantile=A,n.quantize=S,n.rainbow=T,n.threshold=I,n.time=j,n.utcTime=z});